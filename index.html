<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nokia Snake Game</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
    body { 
      display: flex; 
      justify-content: center; 
      align-items: center; 
      min-height: 100vh;
      background: #222; 
      padding: 10px; 
    }
    .container { 
      display: flex; 
      flex-direction: column; 
      align-items: center; 
      width: 100%;
      max-width: 100%;
    }
    .nokia-phone { 
      background: linear-gradient(to bottom, #d4d4d4, #8a8a8a); 
      border-radius: 40px; 
      padding: 20px 15px;
      box-shadow: 0 15px 35px rgba(0,0,0,0.5); 
      border: 5px solid #333; 
      width: 100%; 
      max-width: 360px;
      position: relative; 
    }
    .phone-header { 
      display: flex; 
      justify-content: space-between; 
      align-items: center; 
      padding: 8px 12px;
      background: linear-gradient(to right, #003399, #0066cc); 
      color: white; 
      border-radius: 10px; 
      margin-bottom: 15px; 
      font-weight: bold; 
    }
    .nokia-logo { 
      font-weight: bold; 
      font-size: 20px; 
      text-shadow: 1px 1px 2px rgba(0,0,0,0.5); 
      letter-spacing: 1px; 
    }
    .phone-time { font-size: 14px; }
    .battery-indicator { font-size: 16px; }
    .phone-screen { 
      background-color: #9cb97e; 
      border: 5px solid #333; 
      border-radius: 10px; 
      padding: 8px; 
      margin-bottom: 20px;
      box-shadow: inset 0 0 10px rgba(0,0,0,0.3); 
      position: relative; 
      overflow: hidden;
    }
    .screen-border { 
      border: 2px solid #1a1a1a; 
      border-radius: 5px; 
      padding: 5px; 
      background-color: #7a966c; 
    }
    .game-header { 
      display: flex; 
      justify-content: space-between; 
      padding: 6px; 
      background-color: #4e6c3e;
      border-radius: 5px; 
      margin-bottom: 8px; 
      color: white; 
      font-weight: bold; 
      font-size: 12px; 
      min-height: 28px;
    }
    .game-header div {
      flex: 1;
      text-align: center;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .game-header div:nth-child(1) { text-align: left; }
    .game-header div:nth-child(2) { text-align: center; }
    .game-header div:nth-child(3) { text-align: right; }
    #game-canvas { 
      background-color: #dae422; 
      display: block; 
      margin: 0 auto; 
      border: 2px solid #333; 
      image-rendering: pixelated;
      width: 100%;
      max-width: 300px;
      height: auto;
    }
    .controls-section { 
      display: flex; 
      flex-direction: column; 
      align-items: center; 
      gap: 8px; 
      width: 100%; 
    }
    .control-row { 
      display: flex; 
      justify-content: space-between; 
      width: 100%; 
      gap: 8px; 
    }
    .nav-button { 
      height: 45px; 
      background: linear-gradient(to bottom, #555, #333); 
      border: none; 
      border-radius: 8px; 
      color: white;
      font-size: 18px; 
      cursor: pointer; 
      display: flex; 
      justify-content: center; 
      align-items: center;
      box-shadow: 0 4px 8px rgba(0,0,0,0.3); 
      transition: all 0.1s; 
      flex: 1; 
    }
    .nav-button:active { 
      transform: translateY(2px); 
      box-shadow: 0 2px 4px rgba(0,0,0,0.3); 
    }
    .center-button { 
      background: radial-gradient(circle at 30% 30%, #e33, #a00); 
      font-weight: bold; 
      flex: 0 0 55px; 
      height: 55px;
      border-radius: 50%; 
      font-size: 16px; 
      box-shadow: 0 4px 10px rgba(0,0,0,0.4); 
      display: flex; 
      justify-content: center; 
      align-items: center; 
    }
    .center-button:active { 
      transform: scale(0.95); 
      box-shadow: 0 2px 6px rgba(0,0,0,0.3); 
    }
    .soft-key { 
      padding: 8px; 
      background: linear-gradient(to bottom, #555, #222); 
      border: none; 
      border-radius: 5px; 
      color: white;
      font-weight: bold; 
      cursor: pointer; 
      box-shadow: 0 4px 8px rgba(0,0,0,0.3); 
      flex: 1; 
      font-size: 12px; 
    }
    .call-key { 
      padding: 8px; 
      background: linear-gradient(to bottom, #5a5, #282); 
      border: none; 
      border-radius: 20px; 
      color: white;
      font-weight: bold; 
      cursor: pointer; 
      box-shadow: 0 4px 8px rgba(0,0,0,0.3); 
      flex: 1; 
      font-size: 12px; 
    }
    .end-key { 
      background: linear-gradient(to bottom, #d55, #822); 
    }
    .keypad { 
      display: grid; 
      grid-template-columns: repeat(3, 1fr); 
      gap: 6px; 
      width: 100%; 
      margin-top: 12px; 
    }
    .keypad-button { 
      height: 40px; 
      background: linear-gradient(to bottom, #555, #333); 
      border: none; 
      border-radius: 8px; 
      color: white;
      font-size: 14px; 
      cursor: pointer; 
      display: flex; 
      flex-direction: column; 
      justify-content: center; 
      align-items: center;
      box-shadow: 0 4px 8px rgba(0,0,0,0.3); 
      transition: all 0.1s; 
      padding: 4px; 
    }
    .keypad-button:active { 
      transform: translateY(2px); 
      box-shadow: 0 2px 4px rgba(0,0,0,0.3); 
    }
    .keypad-button .main-label { 
      font-size: 14px; 
      font-weight: bold; 
    }
    .keypad-button .sub-label { 
      font-size: 8px; 
      margin-top: 1px; 
    }
    .sound-controls { 
      display: flex; 
      justify-content: space-between; 
      width: 100%; 
      margin-top: 10px; 
    }
    .sound-btn { 
      padding: 6px 10px; 
      background: linear-gradient(to bottom, #555, #333); 
      border: none; 
      border-radius: 5px; 
      color: white; 
      font-weight: bold; 
      cursor: pointer; 
      box-shadow: 0 2px 5px rgba(0,0,0,0.3); 
      font-size: 12px;
    }
    .game-overlay { 
      position: absolute; 
      top: 0; 
      left: 0; 
      width: 100%; 
      height: 100%; 
      background: rgba(0, 0, 0, 0.7); 
      display: flex; 
      justify-content: center; 
      align-items: center; 
      color: white; 
      font-size: 20px; 
      font-weight: bold;
      border-radius: 5px; 
      display: none; 
      flex-direction: column;
      gap: 8px;
      text-align: center;
    }
    .game-overlay button {
      padding: 6px 12px;
      background: #4e6c3e;
      color: white;
      border: none;
      border-radius: 5px;
      font-weight: bold;
      cursor: pointer;
      font-size: 14px;
    }
    
    /* Responsive adjustments for mobile */
    @media (max-width: 480px) {
      body {
        padding: 5px;
        background: #333;
      }
      .nokia-phone {
        padding: 15px 10px;
        border-radius: 30px;
        max-width: 100%;
      }
      .phone-header {
        padding: 6px 10px;
        margin-bottom: 12px;
      }
      .nokia-logo {
        font-size: 18px;
      }
      .phone-time, .battery-indicator {
        font-size: 12px;
      }
      .phone-screen {
        padding: 6px;
        margin-bottom: 15px;
      }
      .game-header {
        font-size: 11px;
        padding: 5px;
        min-height: 24px;
      }
      .nav-button {
        height: 40px;
        font-size: 16px;
      }
      .center-button {
        flex: 0 0 50px;
        height: 50px;
        font-size: 14px;
      }
      .soft-key, .call-key {
        font-size: 11px;
        padding: 6px;
      }
      .keypad-button {
        height: 35px;
        font-size: 13px;
      }
      .keypad-button .main-label {
        font-size: 13px;
      }
      .keypad-button .sub-label {
        font-size: 7px;
      }
      .sound-btn {
        font-size: 11px;
        padding: 5px 8px;
      }
      .game-overlay {
        font-size: 18px;
      }
    }
    
    @media (min-width: 1024px) {
      body {
        background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
      }
    }
  </style>
</head>
<body>
<div class="container">
  <div class="nokia-phone">
    <div class="phone-header">
      <div class="nokia-logo">NOKIA 3310</div>
      <div class="phone-time">14:25</div>
      <div class="battery-indicator"><i class="fas fa-battery-full"></i></div>
    </div>
    <div class="phone-screen">
      <div class="screen-border">
        <div class="game-header">
          <div>SCORE: <span id="score">0</span></div>
          <div>SNAKE</div>
          <div>HI: <span id="high-score">0</span></div>
        </div>
        <canvas id="game-canvas" width="300" height="300"></canvas>
        <div class="game-overlay" id="game-overlay">
          <div id="overlay-text">GAME PAUSED</div>
          <button id="resume-btn">RESUME</button>
        </div>
      </div>
    </div>
    <div class="controls-section">
      <div class="control-row">
        <button class="soft-key" id="left-soft">Menu</button>
        <button class="nav-button" id="up-btn">↑</button>
        <button class="soft-key" id="right-soft">Back</button>
      </div>
      <div class="control-row">
        <button class="nav-button" id="left-btn">←</button>
        <button class="nav-button center-button" id="ok-btn">OK</button>
        <button class="nav-button" id="right-btn">→</button>
      </div>
      <div class="control-row">
        <button class="call-key" id="call-btn"><i class="fas fa-phone"></i> Call</button>
        <button class="nav-button" id="down-btn">↓</button>
        <button class="call-key end-key" id="end-btn"><i class="fas fa-phone-slash"></i> End</button>
      </div>
      <div class="keypad">
        <button class="keypad-button"><span class="main-label">1</span></button>
        <button class="keypad-button" id="btn-2"><span class="main-label">2</span><span class="sub-label">↑</span></button>
        <button class="keypad-button"><span class="main-label">3</span><span class="sub-label">def</span></button>
        <button class="keypad-button" id="btn-4"><span class="main-label">4</span><span class="sub-label">←</span></button>
        <button class="keypad-button" id="btn-5"><span class="main-label">5</span><span class="sub-label">SPEED</span></button>
        <button class="keypad-button" id="btn-6"><span class="main-label">6</span><span class="sub-label">→</span></button>
        <button class="keypad-button"><span class="main-label">7</span><span class="sub-label">pqrs</span></button>
        <button class="keypad-button" id="btn-8"><span class="main-label">8</span><span class="sub-label">↓</span></button>
        <button class="keypad-button"><span class="main-label">9</span><span class="sub-label">wxyz</span></button>
        <button class="keypad-button"><span class="main-label">*</span></button>
        <button class="keypad-button"><span class="main-label">0</span></button>
        <button class="keypad-button"><span class="main-label">#</span></button>
      </div>
      <div class="sound-controls">
        <button class="sound-btn" id="bgm-toggle">🔊 BGM On</button>
        <button class="sound-btn" id="sfx-toggle">🔊 SFX On</button>
      </div>
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function(){
  const canvas = document.getElementById('game-canvas');
  const ctx = canvas.getContext('2d');
  const scoreElement = document.getElementById('score');
  const highScoreElement = document.getElementById('high-score');
  const gameOverlay = document.getElementById('game-overlay');
  const overlayText = document.getElementById('overlay-text');
  const resumeBtn = document.getElementById('resume-btn');
  const gridSize = 15;
  const gridWidth = canvas.width / gridSize;
  const gridHeight = canvas.height / gridSize;
  
  let snake = [], food = {}, direction = 'right', nextDirection = 'right';
  let score = 0, highScore = localStorage.getItem('snakeHighScore') || 0, gameSpeed = 120;
  let gameRunning = false, gameLoop, isPaused = false;
  
  highScoreElement.textContent = highScore;
  
  // Create audio elements using file paths
  const eatSound = new Audio("music/eating.mp3");
  const bgmSound = new Audio("music/background.mp3");
  const gameoverSound = new Audio("music/gameover.mp3");
  
  // Set sound properties
  eatSound.volume = 0.7;
  bgmSound.volume = 0.5;
  gameoverSound.volume = 0.7;
  bgmSound.loop = true;
  
  let bgmEnabled = true;
  let sfxEnabled = true;
  
  // Set initial button labels
  document.getElementById('bgm-toggle').textContent = '🔊 BGM On';
  document.getElementById('sfx-toggle').textContent = '🔊 SFX On';
  
  // Toggle background music
  document.getElementById('bgm-toggle').addEventListener('click', function() {
    bgmEnabled = !bgmEnabled;
    this.textContent = bgmEnabled ? '🔊 BGM On' : '🔇 BGM Off';
    if (bgmEnabled && gameRunning) {
      bgmSound.play().catch(e => console.log("Autoplay prevented. User interaction needed."));
    } else {
      bgmSound.pause();
    }
  });
  
  // Toggle sound effects
  document.getElementById('sfx-toggle').addEventListener('click', function() {
    sfxEnabled = !sfxEnabled;
    this.textContent = sfxEnabled ? '🔊 SFX On' : '🔇 SFX Off';
  });

  function drawSnakeSegment(x, y, isHead) {
    ctx.fillStyle = isHead ? '#2c511d' : '#4e6c3e';
    ctx.fillRect(x * gridSize, y * gridSize, gridSize, gridSize);
    ctx.strokeStyle = '#223315';
    ctx.strokeRect(x * gridSize, y * gridSize, gridSize, gridSize);
    
    if (isHead) {
      ctx.fillStyle = 'white';
      if (direction === 'right') {
        ctx.fillRect((x + 0.7) * gridSize, (y + 0.2) * gridSize, 3, 3);
        ctx.fillRect((x + 0.7) * gridSize, (y + 0.7) * gridSize, 3, 3);
      } else if (direction === 'left') {
        ctx.fillRect((x + 0.2) * gridSize, (y + 0.2) * gridSize, 3, 3);
        ctx.fillRect((x + 0.2) * gridSize, (y + 0.7) * gridSize, 3, 3);
      } else if (direction === 'up') {
        ctx.fillRect((x + 0.2) * gridSize, (y + 0.2) * gridSize, 3, 3);
        ctx.fillRect((x + 0.7) * gridSize, (y + 0.2) * gridSize, 3, 3);
      } else if (direction === 'down') {
        ctx.fillRect((x + 0.2) * gridSize, (y + 0.7) * gridSize, 3, 3);
        ctx.fillRect((x + 0.7) * gridSize, (y + 0.7) * gridSize, 3, 3);
      }
    }
  }
  
  function drawFood(x, y) {
    ctx.fillStyle = '#d33';
    ctx.beginPath();
    ctx.arc((x + 0.5) * gridSize, (y + 0.5) * gridSize, gridSize / 2 - 1, 0, Math.PI * 2);
    ctx.fill();
    ctx.fillStyle = '#663300';
    ctx.fillRect((x + 0.45) * gridSize, (y + 0.1) * gridSize, 2, 5);
    ctx.fillStyle = '#ff6666';
    ctx.beginPath();
    ctx.arc((x + 0.3) * gridSize, (y + 0.4) * gridSize, 3, 0, Math.PI * 2);
    ctx.fill();
  }
  
  function initGame() {
    snake = [{x: 5, y: 10}, {x: 4, y: 10}, {x: 3, y: 10}];
    generateFood();
    score = 0;
    scoreElement.textContent = score;
    direction = 'right';
    nextDirection = 'right';
    gameSpeed = 120;
  }
  
  function generateFood() {
    food = {
      x: Math.floor(Math.random() * gridWidth),
      y: Math.floor(Math.random() * gridHeight)
    };
    
    for (let i = 0; i < snake.length; i++) {
      if (snake[i].x === food.x && snake[i].y === food.y) {
        return generateFood();
      }
    }
  }
  
  function draw() {
    ctx.fillStyle = '#8aa677';
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    
    // Draw grid lines for better visibility
    ctx.strokeStyle = '#7a966c';
    ctx.lineWidth = 0.5;
    for (let i = 0; i <= gridWidth; i++) {
      ctx.beginPath();
      ctx.moveTo(i * gridSize, 0);
      ctx.lineTo(i * gridSize, canvas.height);
      ctx.stroke();
    }
    for (let j = 0; j <= gridHeight; j++) {
      ctx.beginPath();
      ctx.moveTo(0, j * gridSize);
      ctx.lineTo(canvas.width, j * gridSize);
      ctx.stroke();
    }
    
    for (let i = 0; i < snake.length; i++) {
      drawSnakeSegment(snake[i].x, snake[i].y, i === 0);
    }
    
    drawFood(food.x, food.y);
  }
  
  function moveSnake() {
    direction = nextDirection;
    const head = {x: snake[0].x, y: snake[0].y};
    
    if (direction === 'up') head.y--;
    else if (direction === 'down') head.y++;
    else if (direction === 'left') head.x--;
    else if (direction === 'right') head.x++;
    
    if (head.x < 0 || head.x >= gridWidth || head.y < 0 || head.y >= gridHeight) {
      gameOver();
      return;
    }
    
    for (let i = 0; i < snake.length; i++) {
      if (snake[i].x === head.x && snake[i].y === head.y) {
        gameOver();
        return;
      }
    }
    
    snake.unshift(head);
    
    if (head.x === food.x && head.y === food.y) {
      if (sfxEnabled) {
        eatSound.currentTime = 0;
        eatSound.play().catch(e => console.log("Sound play prevented."));
      }
      score += 10;
      scoreElement.textContent = score;
      generateFood();
      if (gameSpeed > 70) gameSpeed -= 2;
      
      if (score > highScore) {
        highScore = score;
        highScoreElement.textContent = highScore;
        localStorage.setItem('snakeHighScore', highScore);
      }
    } else {
      snake.pop();
    }
  }
  
  function gameUpdate() {
    moveSnake();
    draw();
  }
  
  function startGame() {
    if (gameRunning) return;
    initGame();
    gameRunning = true;
    isPaused = false;
    gameOverlay.style.display = 'none';
    clearInterval(gameLoop);
    gameLoop = setInterval(gameUpdate, gameSpeed);
    
    if (bgmEnabled) {
      bgmSound.currentTime = 0;
      bgmSound.play().catch(e => console.log("Autoplay prevented. User interaction needed."));
    }
  }
  
  function pauseGame() {
    if (!gameRunning) return;
    isPaused = true;
    gameRunning = false;
    overlayText.textContent = 'GAME PAUSED';
    gameOverlay.style.display = 'flex';
    clearInterval(gameLoop);
    bgmSound.pause();
  }
  
  function resumeGame() {
    if (!isPaused) return;
    gameRunning = true;
    isPaused = false;
    gameOverlay.style.display = 'none';
    gameLoop = setInterval(gameUpdate, gameSpeed);
    if (bgmEnabled) {
      bgmSound.play().catch(e => console.log("Autoplay prevented. User interaction needed."));
    }
  }
  
  function gameOver() {
    gameRunning = false;
    isPaused = false;
    overlayText.textContent = 'GAME OVER';
    gameOverlay.style.display = 'flex';
    clearInterval(gameLoop);
    bgmSound.pause();
    
    if (sfxEnabled) {
      gameoverSound.currentTime = 0;
      gameoverSound.play().catch(e => console.log("Sound play prevented."));
    }
  }

  // Controls
  document.getElementById('up-btn').onclick = () => { if (direction !== 'down') nextDirection = 'up'; };
  document.getElementById('down-btn').onclick = () => { if (direction !== 'up') nextDirection = 'down'; };
  document.getElementById('left-btn').onclick = () => { if (direction !== 'right') nextDirection = 'left'; };
  document.getElementById('right-btn').onclick = () => { if (direction !== 'left') nextDirection = 'right'; };
  
  document.getElementById('ok-btn').onclick = () => { 
    if (!gameRunning && !isPaused) {
      startGame(); 
    } else if (isPaused) {
      resumeGame();
    } else {
      pauseGame();
    }
  };
  
  resumeBtn.onclick = () => {
    resumeGame();
  };
  
  document.getElementById('left-soft').onclick = () => {
    if (!gameRunning) {
      alert('📱 Nokia Snake Game\nUse arrow keys or 2,4,6,8 to move\nPress OK to start');
    } else {
      alert('📱 Made by Ashish Vishwakarma');
    }
  };
  
  document.getElementById('right-soft').onclick = () => { 
    if (gameRunning) {
      pauseGame(); 
    } else if (isPaused) {
      resumeGame();
    }
  };
  
  document.getElementById('call-btn').onclick = () => alert('Calling...\n\n+917039716954');
  document.getElementById('end-btn').onclick = () => { 
    if (gameRunning) pauseGame(); 
    alert('Call ended.'); 
  };

  // Numeric keypad controls
  document.getElementById('btn-2').onclick = () => { if (direction !== 'down') nextDirection = 'up'; };
  document.getElementById('btn-4').onclick = () => { if (direction !== 'right') nextDirection = 'left'; };
  document.getElementById('btn-6').onclick = () => { if (direction !== 'left') nextDirection = 'right'; };
  document.getElementById('btn-8').onclick = () => { if (direction !== 'up') nextDirection = 'down'; };
  document.getElementById('btn-5').onclick = () => { 
    if (gameRunning && gameSpeed > 70) {
      gameSpeed -= 20;
      clearInterval(gameLoop);
      gameLoop = setInterval(gameUpdate, gameSpeed);
    }
  };

  document.addEventListener('keydown', function(e) {
    if (e.key === 'ArrowUp' && direction !== 'down') nextDirection = 'up';
    else if (e.key === 'ArrowDown' && direction !== 'up') nextDirection = 'down';
    else if (e.key === 'ArrowLeft' && direction !== 'right') nextDirection = 'left';
    else if (e.key === 'ArrowRight' && direction !== 'left') nextDirection = 'right';
    else if (e.key === '2' && direction !== 'down') nextDirection = 'up';
    else if (e.key === '8' && direction !== 'up') nextDirection = 'down';
    else if (e.key === '4' && direction !== 'right') nextDirection = 'left';
    else if (e.key === '6' && direction !== 'left') nextDirection = 'right';
    else if (e.key === '5') { 
      if (gameRunning && gameSpeed > 70) {
        gameSpeed -= 20;
        clearInterval(gameLoop);
        gameLoop = setInterval(gameUpdate, gameSpeed);
      }
    }
    else if (e.key === 'Enter' || e.key === ' ') { 
      if (!gameRunning && !isPaused) {
        startGame(); 
      } else if (isPaused) {
        resumeGame();
      } else {
        pauseGame();
      }
    }
    else if (e.key === 'Escape' || e.key === 'p') { 
      if (gameRunning) {
        pauseGame(); 
      } else if (isPaused) {
        resumeGame();
      }
    }
  });
  
  // Initial draw
  initGame();
  draw();
  
  // Show instructions on first load
  setTimeout(() => {
    if (!gameRunning && !isPaused) {
      alert('📱 Nokia Snake Game\nUse arrow keys or 2,4,6,8 to move\nPress OK to start');
    }
  }, 500);
});
</script>
</body>
</html>
